mandatory: True
code: |
  interview_metadata # make sure we initialize the object
  if not defined("interview_metadata['complaint_209A_labeled_page10003']"):
    interview_metadata.initializeObject('complaint_209A_labeled_page10003')
  interview_metadata['complaint_209A_labeled_page10003'].update({
    'title': '209A Complaint Page 1',
    'short title': '209A Complaint Page 1',
    'description': '209A Complaint Page 1',
    'original_form': 'https://www.mass.gov/doc/complaint-for-protection-from-abuse-gl-c-209a-page-1/download',
    'allowed courts': [
      'Boston Municipal Court',
      'District Court',
      'Probate and Family Court',
      'Superior Court',
    ],
    'preferred court': 'Any court (no preferred court)',
    'categories': [
      'Domestic Violence / Safety of self',
      'Family Law',
    ],
    'logic block variable': 'complaint_209A_labeled_page10003',
    'attachment block variable': 'complaint_209A_labeled_page10003_attachment',
    'typical role': 'plaintiff',  })
---
objects:
  - other_cases: 
      DAList.using(object_type=Thing,
        complete_attribute='complete')
---
code: |
  if plaintiff_and_defendant_other_case_yes: 
    plaintiff_and_defendant_other_case_no = False
    other_cases.there_are_any = True
  else:
    plaintiff_and_defendant_other_case_no = True
    other_cases.there_are_any = False # moved to its own block per QS to avoid possible loops. 
---
code: |
  other_cases[i].court_name
  other_cases[i].type_of_case
  other_cases[i].date
  other_cases[i].docket_number
  other_cases[i].complete = True
---
id: ask the court for a 209a order
comment: |
  Placeholder sentence for escape button.  
  Text to go in Basic Questions intro: 
  We can help you ask the court for a {209A restraining order}. We will ask you questions and use your answers to put together {all the forms} you need.
  If you are not safe at any time you are on this website, use the [FILE: MAVirtualCourts.esc-en.png](https://google.com:kittens) to jump to Google.com.

question: |
   Ask the court for a 209A Abuse Prevention Order
subquestion: | 
  **If you are in danger right now, call 911.**
  
  Please make sure you are in a {safe place}.
  The application for a 209A is at least 5 pages long. It can take up to 1 and 1/2 hours to answer all the questions.
  
  An Abuse Prevention Order can help protect you from an abusive partner, a family member, or someone in your household. In Massachusetts, we often call this order a {209A restraining order}.
    
  If the abusive person does not obey the order, they  “violate” it. It is a crime to violate a 209A restraining order and the police can arrest them. This order can also order the abusive person to do things like pay utility bills or child support.
  
    A restraining order is only a part of your overall safety plan. Speak with a domestic violence advocate for more help with safety planning. Call [Safelink](https://www.casamyrna.org/get-support/safelink): ${tel("1-877-785-2020")}.
terms:
 - 209A restraining order: |
    People call these court orders, "Abuse Prevention Orders","restraining orders", "209A orders" and "protective orders".
    See [How can a 209A order help me?](https://www.masslegalhelp.org/domestic-violence/how-can-209a-help-me)
 - all the forms: |
    See the checklists on MassLegalHelp for a list of the forms you need to ask the court for protection:
    * [Asking for a 209A restraining order](https://www.masslegalhelp.org/domestic-violence/209a-forms-checklist), or
    * [Asking for a 209A restraining order if you have children under 18](https://www.masslegalhelp.org/domestic-violence/209a-w-children-forms-checklist)
 - safe place: |
     Please be sure you are on a safe computer, that you cannot be interrupted and you will be ok to spend about an hour answering questions.
  
continue button field: main_209A_package_intro
---
id: who needs an order
# comment: |
#  Screening question placeholder
question: |
  Who needs a 209A restraining order in this case?
fields:
  - no label: who_protecting_screener
    datatype: radio
    choices:
      - I need this order to protect me.: me
      - I need the order to protect me and my children.: me and children
      - I am helping someone else ask for this order.: someone else
---
comment: |
  Kate Barry, family law SME, has compiled a lot of bugs here: https://drive.google.com/drive/u/0/shared-with-me
  
  This form is being used to collect bug reports. Contact Matt on Slack or at mbrooks@gbls.org to request access to the
  responses: https://docs.google.com/forms/d/e/1FAIpQLSeHwCqKxXLJVcmPyUOZceuj2iUTmvOLWIEbAkWxfJVfDHvytA/viewform
  
  As of April 15, 2020 at 5pm, the only real bug being reported on the above bug report form is one that produces this error. 
  Unfortunately, the reporters did not provide links to their interview sessions: Error
  There appears to be an infinite loop. Variables in stack are complaint_209A_labeled_page10003_attachment_preview, complaint_209A_labeled_page10003_preview_question, defendant_relationship_to_plaintiff_is.
---
id: name of abuser
question: |
  What is the name of the person who is abusing you?  
fields:
  - First name: other_parties[0].name.first
  - Middle name: other_parties[0].name.middle
    required: False
  - Last name: other_parties[0].name.last
  - Suffix: other_parties[0].name.suffix
    required: False
    code: |
      name_suffix()
  - Gender: other_parties[0].gender
    choices:
      - Female: female
      - Male: male
      - Non-binary: non-binary
      - Prefer not to say: prefer-not-to-say
      - Prefer to write in a different gender: self-described
    help: |
      If you do not select "Male" or "Female", both checkboxes will be empty on the form. The police use your answer to help them identify the person who is abusing you and enforce your restraining order.  
  - Gender: other_parties[0].gender
    show if:
      variable: other_parties[0].gender
      is: "self-described"

---
id: what to expect
question: |
  What to expect
subquestion: |
  When you ask the court for an abuse prevention order, the judge can do 3
  things:

  **1.  Deny your request.** Refuse to give you a restraining order.
  ${other_parties.familiar()} will not get any notice that you asked the court
  for a restraining order.

  **2. {Make a temporary order}.** The judge will give you a restraining order that lasts 10 days, until the 2nd hearing. At the 2nd hearing the judge can hear from both you and
  ${other_parties.familiar()} at the same time.

  **3. {Not make any order}** until they can hear from both you and
  ${other_parties.familiar()} at the same time.  If the judge decides **not** to
  make an order and you decide to go to a hearing where the judge can hear from
  both of you,  ${other_parties.familiar()} will find out you have asked for a
  restraining order.
  
  Talk to a domestic violence advocate to learn more about what to expect. Call
  [SafeLink](https://www.casamyrna.org/get-support/safelink): ${tel("1-877-785-2020")}.
continue button field: user_saw_what_to_expect
Terms:
  Make a temporary order: |
    The judge will decide what you need to protect you from ${other_parties.familiar()} until the 2nd hearing. The judge will not order ${other_parties.familiar()} to pay support or other money at this 1st hearing. The 2nd hearing will be within 10 days of the temporary order. At the 2nd hearing the judge can hear from both you and ${other_parties.familiar()} at the same time.
  Not make any order: |
    The judge may decide not to make an order at the first hearing if they think you will be safe from "immediate danger of abuse" from ${other_parties.familiar()}.  If the judge decides not to make an order and you decide to go to a hearing where the judge can hear from both of you, ${other_parties.familiar()} will find out you have asked for a restraining order.
---
id: other cases
question: |
  Tell the court about the other cases you have had with ${other_parties.familiar()}
subquestion: |  
  If you need to add more, click ${word("Add another")}.
list collect: True
fields:
  - Court name: other_cases[i].court_name
  - Type of case: other_cases[i].type_of_case
    choices:
      - Divorce: divorce
      - Annulment: annulment
      - Separate Support: separate support
      - Legal Separation: legal separation
      - Abuse Prevention (Restraining Order): abuse prevention
  - Date of case: other_cases[i].date
    required: False
  - Docket number of case: other_cases[i].docket_number
    required: False
---
id: other cases there is another
question: |
  Other cases involving you and ${other_parties.familiar()}
subquestion: |
  You've told us about the following cases:
  i  
  % for case in other_cases.complete_elements():
  * ${ case.type_of_case }
  % endfor

  Do you want to add another case?
yesno: other_cases.there_is_another
---
code: |
  plaintiff_has_children_parent_of
  plaintiff_has_children_cares_for
  plaintiff_has_minor_children = plaintiff_has_children_parent_of or plaintiff_has_children_cares_for
---
id: had other cases
question: |
  Other cases with ${other_parties.familiar()}
subquestion: |
  Have you ever had any other cases with ${other_parties.familiar()} for divorce, annulment, separate support, or abuse prevention?
yesno: plaintiff_and_defendant_other_case_yes
---

# question: |
#  Parent or Guardian
# subquestion: |
#  When a plaintiff is under 18, the courts usually want their parent or guardian to file their request for a restraining order for them.
#  Are you the Plaintiff's parent or guardian?
# noyes: user_is_minor_plaintiff
---
# code: |
#  if who_protecting_screener != 'someone else' and plaintiff_is_major_no:
#    user_is_minor_plaintiff = True
---
id: relationship does not qualify
# event: refer_to_258E_resources
# question: |
 # THIS IS PLACEHOLDER SCREEN FOR PEOPLE WHO SHOULD BE FILLING OUT 258E, NOT 209A. SME'S TO PROVIDE LANGUAGE. YOU GET HERE IF YOU CHECK 'NONE OF THE ABOVE' ON THE JURISDICTIONAL QUESTIONS OR YOU CLICK NONE OF THE ABOVE ON THE 'HOW DID THE DEFENDANT ABUSE YOU' QUESTIONS
event: relationship_does_not_qualify # refer_to_258E_resources
question: |
  Your relationship with ${other_parties.familiar()} may not be the kind a 209A restraining order covers
subquestion: |
  Speak with a domestic violence advocate to be sure. Call [SafeLink](https://www.casamyrna.org/get-support/safelink) ${tel("1-877-785-2020")}. 
  
  An advocate may suggest that you ask the court for a [258E Harassment Prevention Order](https://www.masslegalhelp.org/domestic-violence/harassment-prevention-orders).
buttons:
  - Exit: exit
  - Restart: restart
---
id: abuse does not qualify
Comment: |
  This question should probably go in the Affidavit .yml if we decide to KEEP
  the none of the above option when listing types of abuse.
event: abuse_does_not_qualify
question: |
  In Massachusetts the law about abuse focuses on **physical** abuse. 
subquestion: |
  People **can** abuse you emotionally, financially, psychologically, and spiritually, but you can only ask the court for a 209A restraining order if the abusive person:    

  - **hurt** you physically,
  - **tried** to hurt you physically,
  - **made you scared** of getting physically hurt,
  - **forced you** to have sex or sexual contact, or 
  - **made you** have sex or sexual contact by threatening you or making you feel that you have no choice.

   A 209A restraining order is not the only way to stop someone from abusing you. If someone is abusing you in **any** way, speak with a domestic violence advocate for help. They can help you find ways to be safe. Call [SafeLink](https://www.casamyrna.org/get-support/safelink) ${tel("1-877-785-2020")}. 
buttons:
  - Exit: exit
  - Restart: restart
---
include:
  - docassemble.MAVirtualCourt:basic-questions.yml
---
id: helper relationship
question: |
  How are you related to ${users.familiar()}?
fields:
  - "I am  ${users.familiar()}'s": plaintiff_assistant_relationship_to_plaintiff
    datatype: radio
    choices:
      - Parent: parent
      - Guardian: guardian
      - Advocate: advocate
      - Other: other
  #- 'How are you related?': plaintiff_assistant_relationship_to_plaintiff
  #  show if:
  #    code: |
  #      plaintiff_assistant_relationships_to_plaintiff == 'other'
  - 'My name is': plaintiff_assistant_name
    maxlength: 30  
---
# code: |
#  if plaintiff_is_major_no:
#    if not plaintiff_assistant_relationships_to_plaintiff == 'other':
#      plaintiff_assistant_relationship_to_plaintiff = plaintiff_assistant_relationships_to_plaintiff
---
id: defendant alias
question: |
  Has ${other_parties.familiar()} ever used another name?
subquestion: |
  For example, a last name used before marriage, a nickname, or any name other than ${other_parties[0]}.
fields:
  - no label: defendant_has_alias
    datatype: yesnoradio
#   help: |
#    For example, a last name used before marriage, a nickname, or other
#    name other than their current legal name.
  - What other names has ${other_parties.familiar()} used?: other_parties[0].name_other
    show if: defendant_has_alias
    maxlength: 42
  # - ${other_parties.familiar()}'s gender: other_parties[0].gender
  #  choices:
  #   - Female: female
  #   - Male: male
  #   - Non-binary: non-binary
  #   - Prefer not to say: prefer-not-to-say
  #  help: |
  #    If you do not select "Male" or "Female", both checkboxes
  #    will be left unchecked on the form. This answer will be used to help
  #    identify ${other_parties[0]} to the police to allow them to enforce
  #    your order.
  # - Is ${other_parties.familiar()} aged eighteen or older?: defendant_is_major
  #   datatype: yesnoradio
---
code: |
  defendant_is_major = other_parties[0].age_in_years() >= 18
# We never need to ask this question. It's filled in from the affidavit
# ---
# question: |
#   Did the Defendant do any of these things to you?
# subquestion: |
#   The Court needs to know how ${other_parties.familiar()} abused you before it can give you a restraining order.
# fields:
#   - '${other_parties.familiar()} attempted to cause me physical harm': defendant_abuse_attempted_physical_harm
#     datatype: yesno
#   - '${other_parties.familiar()} has placed me in fear of imminent serious physical harm': defendant_abuse_caused_fear_of_serious_physical_harm
#     datatype: yesno
#   - '${other_parties.familiar()} has harmed me': defendant_abuse_caused_physical_harm
#     datatype: yesno
#   - '${other_parties.familiar()} has caused me to engage in sexual relations by force, threat, or duress': defendant_abuse_caused_sexual_assault
#     datatype: yesno
#   - 'None of the above. SHOULD WE JUST REMOVE THIS?': no_abuse_checked
#     datatype: yesno
# ---    
# question: |
#   When did ${other_parties.familiar()} abuse you?
# fields:
#   - '${other_parties.familiar()} abused me on the following dates': abuse_suffered_date
---
id: requested orders
question: |
  What are you asking for?
subquestion: |
  We will check the box on the form that asks the court to order
  ${other_parties.familiar()} to stop abusing you.
  
  What else do you need the Court to do?
fields:
  # - 'I need the Court to order ${other_parties.familiar()} to stop abusing me.': order_defendant_stop_abuse_yes
  #   datatype: yesno
  - 'I need the Court to order ${other_parties.familiar()} to not have contact with me.': order_defendant_no_contact_unless_court_authorized_yes
    datatype: yesno
  - 'I need the Court to order ${other_parties.familiar()} to leave and stay away from my home': order_defendant_remain_away_plaintiff_residence_yes
    datatype: yesno
  # - 'Is your home in an apartment building or a multi-family home?': If_this_is_an_apartment_building_or_other_multiple_family_dwelling_check_here
  #   datatype: yesnoradio
  #   show if:
  #     variable: order_defendant_remain_away_plaintiff_residence_yes
  #     is: True
  - 'I need the Court to order ${other_parties.familiar()} to leave and stay away from my work.': order_defendant_remain_away_plaintiff_workplace_yes
    datatype: yesno
  - 'I need the Court to order ${other_parties.familiar()} to leave and stay away from my school.': order_defendant_remain_away_plaintiff_school_yes
    datatype: yesno
---
code: |
  # This is silly to ask--the only reason Plaintiff wants the order
  order_defendant_stop_abuse_yes = True
---
id: requested orders payment
question: |
  Should the judge order ${other_parties.familiar()} to pay you for anything?
subquestion: |
  The judge can order ${other_parties.familiar()} to pay for money you lost or
  spent as a direct result of the abuse.  
  
  For example, the judge might order ${other_parties.familiar()} to pay for your
  lost wages, medical bills, changing locks, or damaged property.  
  
  In some cases, the judge may also order ${other_parties.familiar()} to support
  **you** financially. This support would be **on top of** any child support you
  ask for.
  
  Keep your answer short. You can tell the judge more at the hearing.  
fields:
  - 'I need the judge to order ${other_parties.familiar()} to pay me because of losses I have suffered.': order_defendant_pay_yes
    datatype: yesno
  - 'The judge should order ${other_parties.familiar()} to pay me:': order_defendant_pay_amount
    datatype: currency
    min: 0
    show if:
      variable: order_defendant_pay_yes
      is: True
  - 'This is why the judge should order ${other_parties.familiar()} to pay me:': losses_caused_by_defendant
    input type: area
    rows: 2
    maxlength: 113
    show if:
      variable: order_defendant_pay_yes
      is: True
  - 'The judge should order ${other_parties.familiar()} to support me temporarily.': order_defendant_pay_temporary_support_to_plaintiff_yes
    datatype: yesno
---
code: |
  # has requested any of the kids of relief listed on Page 2
  # (custody, no contact, visitation, support).
  requested_relief_for_minors = requests_custody_yes or wants_other_order_yes or \
    len(wants_custody_of) > 0 or len(wants_no_contact_for) > 0 or len(schools_to_stay_away_from) > 0 \
    or (len(children_of_both) and wants_child_support_yes) or \
    (len(children_of_both) and wants_visitation_orders)
---
code: |
  # This box should always be checked if the person 
  # has requested any of the kids of relief listed on Page 2
  # (custody, no contact, visitation, support).
  order_page_two_relief_yes = plaintiff_has_minor_children and requested_relief_for_minors
  # - 'The Court should order the relief related to my minor children.': order_page_two_relief_yes # stretch goal: if someone who said they don't have kids under eighteen checks this, then ask about kids under eighteen again.
  # datatype: yesno    
---
id: protecting addresses
question: |
  Protecting your addresses 
subquestion: |
  ${other_parties.familiar()} will see the restraining order. 
  
  Check the box next to any address you need to keep off the restraining order. 
fields: 
  - "Keep my home address off the order.": order_impound_plaintiff_address_residential_yes
    datatype: yesno
  - "Keep my work address off the order.": order_impound_plaintiff_address_work_yes
    datatype: yesno
  - "Keep my school address off the order.": order_impound_plaintiff_address_school
    datatype: yesno
---
id: other orders
question: |
  Is there anything else you need the court to order?
subquestion: |
  Is there anything else you need the court to order ${other_parties.familiar()} to do?
  
  Keep your answer short. You can tell the judge more at the hearing.
fields:
  - 'I need the judge to order something else': order_other_relief_yes
    datatype: yesno
  - 'I also need the judge to order:': other_relief
    input type: area
    maxlength: 200
    show if:
      variable: order_other_relief_yes
      is: True
help:
  label: What other kinds of things?
  heading: What else can I ask for?
  content: |
    You can ask the judge to order anything you need to stay safe. Some examples are,  "Order ${other_parties.familiar()} to:
    
    * Give me the keys to my home or my car.
    * Leave the car with me.
    * Pay rent or utilities.
    * Continue to pay insurance premiums.
    * Return any important papers like my passport, birth certificates, immigration papers. 
---
id: order ex parte
question: |
 Do you need a 209A restraining order right away?
subquestion: |
  Do you need an emergency order that starts now, before
  the court notifies ${other_parties.familiar()} that you are asking for a restraining order?
  
  If you do **not** need the order right away, uncheck the box below.
fields:      
  - 'I need a restraining order **before** the court tells ${other_parties.familiar()} I am asking for one.': order_relief_ex_parte
    datatype: yesno
    default: True
  - note: |
      **Warning**: if you uncheck this box, you will not be asking for an **emergency order**:

      1. You will not get an order for at least 10 days.
      2. The court will notify ${other_parties.familiar()} that you are going to court to ask for an order. 
    show if: 
      variable: order_relief_ex_parte        
      is: False
---
# help: |
#   There are four courts that you can choose from to get a 209A Restraining order.
  
#   1. The Boston Municipal Court or District court may be close to where you live.
#   2. There is only one Probate and Family Court and one Superior Court in
#   most counties, which may be further away from where you live.
  
#   You can get a 209A restraining order at the District Court near where you live or the Probate and Family Court in your county.  If you live in Boston, you can go to the Boston Municipal Court (BMC) near where you live instead of a District Court. You can also go to the Superior Court in your county.  Most people get 209A restraining orders from District Court, BMC, or Probate and Family Court.  Superior Court restraining orders are rare but may be an option when other available courts are closed due to the COVID-19 crisis. 
  
#   If you have moved to another town in Massachusetts since the abuse, you can go to the court where you live now or to the court for an address that you had to leave because of the abuse. 
  
#   Some things to think about when you are deciding which court is better for you are:  
  
#   #### If the other parent wants to visit your child  
#   The District Court is not supposed to order visitation between the other parent and your child as part of a 209A case. The Probate and Family Court can order visitation in a 209A case.  If you want to get visitation settled right away, you might want to go to the Probate and Family Court to file for the 209A restraining order. If you do not want the court to decide about visitation, you might want to go to the District Court for your 209A restraining order. 
  
#   #### If the person who abused you is facing criminal charges  
#   If the person who abused you is facing criminal charges related to the domestic violence, you might want to file for your 209A restraining order at the District or Superior Court where that case is. That way, you may be able to work with the same Victim/Witness Advocate for both cases.
  
#   Read more at: [https://www.masslegalhelp.org/domestic-violence/where-can-i-get-209a](https://www.masslegalhelp.org/domestic-violence/where-can-i-get-209a)
# question: |
#   Where do you want to file your case?
# subquestion: |
#   Which court do you plan to file your case in?
  
#   Choosing the court will change the kind of help you can get on this form. 
#   Click "Help" to learn more.
  
#   We will help you locate the right court based on your address later on
#   in this form. Give us your best guess now.
# fields:
#   - I want to file my case in: court_selection
#     input type: radio
#     choices:
#       - 'Boston Municipal Court': Municipal Court
#       - 'District Court': District Court
#       - 'Probate and Family Court': Probate Court
#       - 'Superior Court': Superior Court
# comment: |
#   validation code: |
#   if ((court_selection == 'Superior Court') 
#   and defendant_and_plaintiff_are_dating_or_dated 
#   and not defendant_and_plaintiff_are_parents_of_child
#   and related_by_household.all_false()
#   and not related_as_couple.any_true('engaged','past_engaged')
#   and relationship_to_defendant_married.all_false()
#   and not defendant_and_plaintiff_relationship_not_married_but_are_related:
#   # (relationship_to_defendant_unmarried['defendant_and_plaintiff_are_dating_or_dated'] == True) and
#   # (relationship_to_defendant_marriage_or_kids['defendant_and_plaintiff_relationship_married_to_each_other'] == False) and
#   # (relationship_to_defendant_marriage_or_kids['defendant_and_plaintiff_relationship_formerly_married_to_each_other'] == False) and
#   # (relationship_to_defendant_marriage_or_kids['defendant_and_plaintiff_are_parents_of_child'] == False) and
#   # (relationship_to_defendant_unmarried['defendant_and_plaintiff_are_not_related_but_live_together'] == False) and
#   # (relationship_to_defendant_unmarried['defendant_and_plaintiff_relationship_not_married_but_are_related'] == False) and
#   # (relationship_to_defendant_unmarried['defendant_and_plaintiff_are_not_related_but_live_together'] == False) and
#   # (relationship_to_defendant_unmarried['defendant_and_plaintiff_used_to_live_together'] == False)) == True:
#     validation_error("You cannot file in the Superior Court because you and the Defendant have a dating relationship. Pick another court.")
# ---
# code: |
#   # Used to decide on page2 if we ask the person
#   # if defendant is also a parent of the child
#   defendant_and_plaintiff_are_parents_of_child = relationship_to_defendant_married['defendant_and_plaintiff_are_parents_of_child']
---
id: user birthdate
question: |
  % if who_protecting_screener == "someone else":
  Is ${users.familiar()} at least 18?
  % else:
  Are you at least 18 years old?
  % endif
subquestion: |
  We can only help people under 18 if a parent, guardian, or advocate files for them.
fields:
  - label: |
      % if who_protecting_screener == "someone else":
      What is ${users.familiar()}'s birthdate?
      % else:
      What is your birthdate?
      % endif      
    field: users[0].birthdate
    datatype: BirthDate
---
code: |  
  if users[0].birthdate >= today().minus(years=18):
    plaintiff_is_major_yes = False
  else:
    plaintiff_is_major_yes = True
 
#fields:
#  - 'I am eighteen or older': plaintiff_is_major_yes
#    datatype: yesnoradio # consensus seems to be that if plaintiff is under 18 AND ISN'T DOING THIS WITH A PARENT OR GUARDIAN, they should get kicked out and referred to an advocate. Wait to hear from KB after talking to CR and LG. doing these for minors is a whole other can of worms and there is a big risk that doing it wrong does more harm than good. Also, the consensus is that the population of kids trying to do 209As without their parents is small.
---
id: form filing helper
question: |
  Who will be filing these forms with you?
subquestion: |
  Since you are under 18, we can only help you if you are filing your forms with the help of:
  
  * your parent,
  * your guardian, or
  * a domestic violence advocate.
fields:
  - no label: plaintiff_assistant_type
    datatype: radio
    choices:
      - My parent is filing with me: parent
      - My guardian is filing with me: guardian
      - A domestic violence advocate is filing with me: advocate
      - I am filing on my own, with no help: self
---
id: name of assistant
question: |
  What is your ${plaintiff_assistant_type}'s name?
fields:
  - ${plaintiff_assistant_type.capitalize()}'s full name: plaintiff_assistant_type_name   
---
code: |
  plaintiff_assistant_name = plaintiff_assistant_type_name
---
objects:
  - defendant_has_guns: DADict.using(auto_gather=False,gathered=True)
---
id: weapons
question: |
  Weapons
subquestion: |
  The police need to be safe when they give ${other_parties.familiar()}:
  
  * a copy of the restraining order, and 
  * notice about the 10 day hearing coming up.

  What does ${other_parties.familiar()} own or have access to?
fields:
  - A gun: defendant_has_guns['gun']
    datatype: yesnomaybe
  - Describe the gun(s): defendant_weapons_description
    maxlength: 29
    show if: 
      variable: defendant_has_guns['gun']
      is: True    
  - Ammunition: defendant_has_guns['ammo']
    datatype: yesnomaybe
  - Firearms ID card: defendant_has_guns['FID']
    datatype: yesnomaybe
  - License to carry: defendant_has_guns['license']
    datatype: yesnomaybe
---
code: |
  defendant_weapons = comma_list(defendant_has_guns.true_values()) + space('defendant_weapons_description', prefix=' - ')
  defendant_weapons_safe_for_pdf = defendant_weapons + (" (see Addendum)" if len(defendant_weapons) > 40 else '')
---
code: |
  defendant_weapons_for_addendum = comma_list(defendant_has_guns.true_values()) + ( " Description of guns: " + defendant_weapons_description if defendant_has_guns["gun"] else '')
---
code: |
  need_gun_addendum = len(defendant_weapons) > 40
---
# Unused
code: |
  need_relief_addendum =  len(other_relief) > 215 if order_other_relief_yes else False
---
# Unused
code: |
  other_relief_safe_for_pdf = "(See Addendum.) " + other_relief[:215].replace("\r","").replace("\n","")
---
code: |
  # this is a single-line field in the pdf
  losses_caused_by_defendant = losses_caused_by_defendant.replace("\r\n","").replace("\n","")

---
# Unused - set a rediculous limit so it's never met.
code: |
  need_losses_addendum = len(losses_caused_by_defendant) > 2000 if order_defendant_pay_yes else False
---
# Unused
code: |
  losses_caused_by_defendant_safe_for_pdf = "(See Addendum.) " + losses_caused_by_defendant[:100].replace("\r","").replace("\n","")
---
code: |
  need_cases_addendum = len(other_cases) > 1
---  
code: |
  cases_other_safe_for_pdf = comma_and_list([case.court_name + ' (' + \
      case.type_of_case + ') ' + \
      showifdef('case.date') + ' ' + \
      showifdef('case.docket_number') for case in other_cases[:1]]) + " (See Addendum)"
---
code: |
  need_page1_addendum = need_cases_addendum or need_gun_addendum
---
id: mandated reporters
question: |
  % if who_protecting_screener == 'someone else':
  Because ${users.familiar()} is under 18
  % else:
  Because you are under 18
  % endif
subquestion: |
  Judges and other court employees are "mandated reporters." 
  
  If they think someone under 18 is being abused, they must report it to the Department of Children and Families.
  
  % if who_protecting_screener == 'someone else':
  It is possible this will happen in ${users.familiar()}'s case.
  % else:
  It is possible this will happen in your case.
  % endif
continue button field: dcf_warning_given
---
id: 209A page 1 relationship intro  
question: |  
  Your relationship to ${other_parties.familiar()}  
subquestion: |  
  You and ${other_parties.familiar()} must be {members of the same family or household} to get a 209A order.  
  
  You may think you are **not** members of the same family or household. But the law may say you are.  
  
  The next set of questions is to find out if your relationship to ${other_parties.familiar()} is one that means you can get a 209A order against them.
terms:
  - members of the same family or household: |
      You and ${other_parties.familiar()} are members of the same family or household if you:  
      1. have a child or children in common,
      2. are married to each other now,  
      3. used to be married to each other,  
      4. are not married but related to each other by marriage, ,  
      5. live in the same household,  
      6. used to live in the same household,  
      7. date each other now or are engaged,  
      8. used to date each other or used to be engaged, or  
      9. are blood relatives. Adopted family members count as blood relatives.
continue button field: user_saw_relationship  
---
id: 209A page 1 relationship kids
question: |
  Do you and ${ other_parties.familiar() } have any children together?
yesno: defendant_and_plaintiff_are_parents_of_child
---
id: 209A page 1 relationship household
question: |
  Do you and ${ other_parties.familiar() } live in the {same household}?
fields: 
  - no label: related_by_household
    datatype: checkboxes
    choices:
      - 'I live in the same household with ${ other_parties.familiar() } **now**': now
      - 'I **used** to live in the same household with ${ other_parties.familiar() }': past
    none of the above: |
      I **never** lived in the same household with ${ other_parties.familiar() }
    validation messages:
      checkboxes required: |
        Check at least one option
terms:
  - same household: |
      You live in the "same household" if you:
    
      * live together,
      * are roommates, or
      * live in the same house or apartment.   
---
code: |
  # check for dating only relationship for use on the court selection page
  is_dating_only = (related_as_couple["dating"] or related_as_couple["dated"]) \
                    and not len(related_as_couple.true_values()) > 1 \
                    and not relationship_to_defendant_married.any_true() \
                    and not defendant_and_plaintiff_relationship_not_married_but_are_related
                    # and not defendant_and_plaintiff_are_parents_of_child
                    # and not related_by_marriage and not related_by_blood
---
comment: |
  Adding punctuation at the end of each list item as screen readers need punctuation at the end of each to be able to convey list to user.
id: 209A page 1 couple relationship
question: |
  Were you ever a 'couple'?
subquestion: |
   ${ users.familiar() }, check the boxes next to any of the relationships you have with ${ other_parties.familiar() }.
fields:
  - no label: related_as_couple
    datatype: checkboxes
    choices:
      - 'I am dating ${ other_parties.familiar() }.': dating
      - 'We **used** to date.': dated
      - 'We are engaged.': engaged
      - 'We **used** to be engaged.': past_engaged
    none of the above: False
    required: False
  - note: |
      ### Were you ever married to ${other_parties.familiar()}?
  - no label: relationship_to_defendant_married
    datatype: checkboxes
    choices:
      - 'We are married now.': now
      - 'We used to be married.': past
    none of the above: |
      I was never married to ${ other_parties.familiar() }.
---
id: 209A page 1 in-law relationship
question: |
  Related by marriage
subquestion: |
  You said you were never married to ${ other_parties.familiar() }. Do you have any kind of {in-law relationship}? 
fields:
  - 'Are you related by marriage?': related_by_marriage
    datatype: yesnoradio
  - '${ other_parties.familiar() } is my': defendant_relationship_to_plaintiff_is
    show if: related_by_marriage
    maxlength: 32
terms:
  in-law relationship: |
    Examples of being related by marriage are in-law relationships like:
    - * Your in-laws and steps are all related to you by marriage.
    - * Your son-in-law and daughter-in-law are related to you by marriage.      
    - * Your stepfather and stepmother are related to you by marriage.
    - * Also, your your sibling's spouse is related to you by marriage.
---
id: 209A page 1 blood relationship
question: |
  Related by blood or adoption
subquestion: |
  Is ${ other_parties.familiar() } a {blood relative}?
  
  Adopted family members are considered blood relatives.
fields:
  - ${ other_parties.familiar() } and I are {blood relatives}: related_by_blood
    datatype: yesnoradio
  - '${ other_parties.familiar() } is my': defendant_relationship_to_plaintiff_is
    show if: related_by_blood
    maxlength: 32
terms: 
  - blood relative: |
      Examples of blood relatives:  
      Your grandparents, aunts and uncles, cousins, and grandchildren are all blood relatives. If you are a grandparent, you are related to **both** parents of your grandchild - even if they are not married.
  - blood relatives: |
      Examples of blood relatives:  
      Your grandparents, aunts and uncles, cousins, and grandchildren are all blood relatives. If you are a grandparent, you are related to **both** parents of your grandchild - even if they are not married.      
---
---
id: about_the_abuse
question: |
  About the abuse
subquestion: |
  Your relationship with ${other_parties.familiar()} means you can ask the court to order ${other_parties.familiar()} to stop abusing you.
  
  The next set of questions is about the abuse.  
  
  Although ${other_parties.familiar()} may have abused you in many ways, to get a 209A abuse prevention order, ${other_parties.familiar()} must have:
  
  * **hurt** you physically,
  * **tried to hurt** you physically,
  * **made you scared** of getting physically hurt,
  * **forced** you to have sex or sexual contact, or
  * **made** you have sex or sexual contact by threatening you or making you feel that you have no choice.
continue button field: user_saw_abuse_explanation
---
id: identify_the_abuse
question: |
  Did ${other_parties.familiar()} ever...?
subquestion: |
  Check everything that is true.
fields:
  - '**hurt** you physically?': defendant_abuse_caused_physical_harm
    datatype: yesnowide
  - '**try to hurt** you physically?': defendant_abuse_attempted_physical_harm
    datatype: yesnowide
  - '**make** you scared of getting physically hurt?': defendant_abuse_caused_fear_of_serious_physical_harm
    datatype: yesnowide
  - '**force** you to have sex or sexual contact, or': defendant_abuse_caused_sexual_assault_force    
    datatype: yesnowide
  - '**make** you have sex or sexual contact by threatening you or making you feel that you have no choice?': defendant_abuse_caused_sexual_assault_make
    datatype: yesnowide
help:
  label: Can you give me some examples?
  heading: Can you give me some examples?
  content: |
    **Making you afraid of physical harm** includes saying things like "I'll kill you if you leave me," or "If you don't give me the car keys, I'll hit you harder than last time." It can also include waving a gun or knife at you, smashing your furniture, driving recklessly, and hurting or killing your pets. It includes threatening to commit any act of violence, threatening with a fake gun, or bomb threats. 
        
    **Physically hurting you** includes shoving, pushing, punching, slapping, kicking, pulling your hair, choking, strangling, throwing things at you, burning you with hot food or cigarettes, stabbing, shooting, or locking you in a room.
    
    **Threatening, making or forcing you to have sex** also includes forced contact with intimate body parts.

    More - See [Writing Your 209A Affidavit on MassLegalHelp](https://www.masslegalhelp.org/domestic-violence/209a-writing-affidavit)
---
code: |
  if defendant_abuse_caused_sexual_assault_force or defendant_abuse_caused_sexual_assault_make:
    defendant_abuse_caused_sexual_assault = True
  if not defendant_abuse_caused_sexual_assault_force and not defendant_abuse_caused_sexual_assault_make:
    defendant_abuse_caused_sexual_assault = False
---
id: other cases
question: |
  Other Cases
subquestion: |
  Tell me about your other case
fields:
  - Court: other_cases[i].court
  - Type of Case: other_cases[i].type_of_case
  - Date of Case: other_cases[i].date_of_case
  - Docket Number: other_cases[i].docket_number
---
id: refer to advocate
event: refer_to_advocate
question: |
  Since
  % if who_protecting_screener == "someone else":
  ${users.familiar()} is not 18: 
  % else:
  you are not 18:
  % endif.
subquestion: |
  Our guide can only help if a parent, guardian, or advocate is helping 
  % if who_protecting_screener == "someone else":
   ${users.familiar()} answer the questions we ask and files for ${users.familiar()}.
  % else:
  you answer the questions we ask and files for you.
  % endif
  
  To get help from an advocate, call [Safelink](https://www.casamyrna.org/get-support/safelink): 

  (877) 785-2020. 
  They have a 24-hour hotline. 
  
  To learn more about  [getting a restraining order while you are under 18](https://www.masslegalhelp.org/domestic-violence/abuse-prevention-orders/under-18), see MassLegalHelp. 
buttons:
  - Exit: exit
  - Restart: restart
---
# event: refer_to_advocate
# question: |
 # We are sorry, you should complete this interview with an advocate.
# subquestion: |
#  Unfortunately, this tool is not currently available to plaintiffs under 18 filing unless they are filing with a parent or guardian.  You may still be able to file directly by calling your local courthouse or police station when the courts are closed, but it could be complicated.
# under: |
#  Since you are under 18, the Department of Children and Families may get involved if you file a restraining order. You can read more about getting a restraining order while you are under 18 at https://www.masslegalhelp.org/domestic-violence/abuse-prevention-orders/under-18.  You can also contact a 24/7 domestic violence hotline at (877) 785-2020 to talk to someone about what's going on.  # Someone at Children's Law Center is getting me some additional child appropriate resources here. 
# buttons:
#  - Exit: exit
#  - Restart: restart
---
code: |
  test_relationship_does_not_qualify = relationship_to_defendant_married.all_false() and \
    not defendant_and_plaintiff_are_parents_of_child and \
    related_by_household.all_false() and \
    related_as_couple.all_false() and \
    relationship_to_defendant_married.all_false() and \
    not related_by_marriage and \
    not related_by_blood
---
comment: |
  interview_order
scan for variables: False
sets: complaint_209A_labeled_page10003
id: complaint_209A_labeled_page10003
code: |
  # allowed_courts = interview_metadata['complaint_209A_labeled_page10003']['allowed courts']
  # preferred_court = interview_metadata['complaint_209A_labeled_page10003']['preferred court']
  # basic_questions_intro_screen 
  # user_saw_what_to_expect
  # users[0].name.first
  # plaintiff_is_major_yes # Ask for age
  # other_parties[0].name.first

  # defendant_has_alias # We ask this towards end

  # if plaintiff_is_major_yes == True:
  #  plaintiff_is_major_no = False
  #  plaintiff_assistant_name = DAEmpty()
  # else:
  #  plaintiff_is_major_no = True
  #  dcf_warning_given
  #  if user_is_minor_plaintiff:
  #    refer_to_advocate
  #  plaintiff_assistant_name

  # plaintiff defendant relationship
  user_saw_relationship
  defendant_and_plaintiff_are_parents_of_child
  related_by_household
  related_as_couple 
  if relationship_to_defendant_married['past']:
    defendant_and_plaintiff_relationship_not_married_but_are_related = True
    if defendant_and_plaintiff_are_parents_of_child:
      defendant_relationship_to_plaintiff_is = "child's other parent and "
    else:
      defendant_relationship_to_plaintiff_is = ''
    defendant_relationship_to_plaintiff_is += "ex-spouse." 
  if relationship_to_defendant_married['now']:
    defendant_and_plaintiff_relationship_not_married_but_are_related = False
    defendant_relationship_to_plaintiff_is = ''
  if relationship_to_defendant_married.all_false():
    if defendant_and_plaintiff_are_parents_of_child:
      defendant_and_plaintiff_relationship_not_married_but_are_related = True
      defendant_relationship_to_plaintiff_is = "child's other parent."
    else:
      defendant_and_plaintiff_relationship_not_married_but_are_related = related_by_marriage
      if not related_by_marriage:
        defendant_and_plaintiff_relationship_not_married_but_are_related = related_by_blood
        if not related_by_blood:
          defendant_relationship_to_plaintiff_is = ''
  if related_by_household['now']:
    if not relationship_to_defendant_married['now'] and not defendant_and_plaintiff_relationship_not_married_but_are_related:
      defendant_and_plaintiff_are_not_related_but_live_together = True
    else:
      defendant_and_plaintiff_are_not_related_but_live_together = False
  else:
    defendant_and_plaintiff_are_not_related_but_live_together = False

  defendant_and_plaintiff_used_to_live_together = related_by_household['past']
  
  if related_as_couple.any_true('dating','dated','engaged','past_engaged'):
    defendant_and_plaintiff_are_dating_or_dated = True
  else:
    defendant_and_plaintiff_are_dating_or_dated = False

  if test_relationship_does_not_qualify:
    relationship_does_not_qualify
    
  plaintiff_has_minor_children

  # other_cases.gather()  # Ask this later

  # order_defendant_stop_abuse_yes
  # if not order_defendant_remain_away_plaintiff_residence_yes:
  #   If_this_is_an_apartment_building_or_other_multiple_family_dwelling_check_here = DAEmpty()
  # if not order_defendant_pay_yes:
  #   losses_caused_by_defendant = DAEmpty()
  #   order_defendant_pay_amount = DAEmpty()

  # order_impound_plaintiff_address_residential_yes

  # if no_abuse_checked:
  #   refer_to_258E_resources
  # if not order_other_relief_yes:
  #   other_relief = DAEmpty()
  # if not defendant_weapons_guns: # This needs to get moved. It appears in a jarring place right now.
  #   defendant_weapons_description = DAEmpty()

  # This comes from the main affidavit    
  # abuse_suffered_date
  # order_relief_ex_parte
  
  # # losses_caused_by_defendant_safe_for_pdf
  # need_losses_addendum
  # need_relief_addendum
  # other_relief_safe_for_pdf
  # need_cases_addendum
  # cases_other_safe_for_pdf

  # Below are only used for standalone interview
  # signature_date 
  # mark_unfilled_fields_empty(interview_metadata["complaint_209A_labeled_page10003"])
  # complaint_209A_labeled_page10003_preview_question # Pre-canned preview screen
  # basic_questions_signature_flow
  # users[0].signature

  complaint_209A_labeled_page10003 = True
---
code: |
  # Trigger computed values from page 1
  # We need this to let skip undefined work. and in its own block
  # since we shuffled order of a lot of these questions
  # plaintiff_assistant_name
  other_parties[0].gender_male
  other_parties[0].gender_female
  defendant_weapons_safe_for_pdf
  defendant_and_plaintiff_relationship_not_married_but_are_related
  defendant_relationship_to_plaintiff_is
  defendant_is_major
  defendant_and_plaintiff_are_parents_of_child
  defendant_and_plaintiff_are_not_related_but_live_together
  defendant_and_plaintiff_used_to_live_together
  defendant_and_plaintiff_are_dating_or_dated
  plaintiff_has_minor_children
  incident_date
  defendant_abuse_attempted_physical_harm
  defendant_abuse_caused_physical_harm
  defendant_abuse_caused_sexual_assault
  order_impound_plaintiff_address_school
  need_page1_addendum
  order_page_two_relief_yes

  trigger_page1_computed_values = True

---
code: |
  plaintiff_and_defendant_other_case_description = \
    comma_and_list([case.court_name + ' (' + \
      case.type_of_case + ') ' + \
      showifdef('case.date') + ' ' + \
      showifdef('case.docket_number') for case in other_cases])
# ---
# code: |
#   # Refer to the first incident of abuse from the 209A affidavit question
#   abuse_suffered_date = incident_date # Pulls from 209A_affidavit
---
continue button field: complaint_209A_labeled_page10003_preview_question
question: |
  Placeholder preview screen
subquestion: |
  Here is a preview of the form you'll sign on the next page. 
  
   ${complaint_209A_labeled_page10003_attachment_preview}
---
attachment:
    variable name: complaint_209A_labeled_page10003_attachment_preview
    skip undefined: True
    name: 209A Complaint Page 1
    filename: A_Complaint_Page_1
    editable: False
    pdf template file: complaint_209A_labeled_1.pdf
    decimal places: 2    
    fields: 
      - "user_name_full": ${ str(users[0]) }
      - "defendant": ${ str(other_parties[0]) }
      - "signature_date": ${ signature_date.format("M/d/yyyy") }
      - "municipal_court": ${ courts[0].department == "Boston Municipal Court" }
      - "district_court": ${ courts[0].department == "District Court" }
      - "probate_court": ${ courts[0].department == "Probate and Family Court" }
      - "superior_court": ${ courts[0].department == "Superior Court" }
      - "court_name_short": ${ courts[0].division }
      - "defendant_alias": ${ other_parties[0].name_other if defendant_has_alias else '' }
      - "defendant_weapons_description": ${ defendant_weapons_safe_for_pdf  }
      - "defendant_gender_male": ${ other_parties[0].gender_male }
      - "defendant_gender_female": ${ other_parties[0].gender_female }
      - "plaintiff_is_major_yes": ${ plaintiff_is_major_yes }
      - "plaintiff_is_major_no": ${ plaintiff_is_major_no }
      - "defendant_and_plaintiff_relationship_married_to_each_other": ${ relationship_to_defendant_married['now'] }
      - "defendant_and_plaintiff_relationship_formerly_married_to_each_other": ${ relationship_to_defendant_married['past'] }
      - "plaintiff_assistant_name": ${ plaintiff_assistant_name if plaintiff_is_major_no else '' }
      - "plaintiff_assistant_relationship_to_plaintiff": ${ plaintiff_assistant_relationship_to_plaintiff }
      - "defendant_and_plaintiff_relationship_not_married_but_are_related": ${ defendant_and_plaintiff_relationship_not_married_but_are_related }
      - "defendant_relationship_to_plaintiff_is": ${ defendant_relationship_to_plaintiff_is }
      - "defendant_is_major": ${ defendant_is_major }
      - "defendant_and_plaintiff_are_parents_of_child": ${ defendant_and_plaintiff_are_parents_of_child }
      - "defendant_and_plaintiff_are_not_related_but_live_together": ${ defendant_and_plaintiff_are_not_related_but_live_together }
      - "defendant_and_plaintiff_used_to_live_together": ${defendant_and_plaintiff_used_to_live_together }
      - "defendant_and_plaintiff_are_dating_or_dated": ${ defendant_and_plaintiff_are_dating_or_dated }
      - "plaintiff_has_minor_children_yes": ${ plaintiff_has_minor_children }
      - "plaintiff_has_minor_children_no": ${ not plaintiff_has_minor_children }
      - "plaintiff_and_defendant_other_case_yes": ${ plaintiff_and_defendant_other_case_yes }
      - "plaintiff_and_defendant_other_case_no": ${ not plaintiff_and_defendant_other_case_yes }    
      - "abuse_suffered_date": ${ incident_date }
      - "defendant_abuse_attempted_physical_harm": ${ defendant_abuse_attempted_physical_harm }
      - "defendant_abuse_caused_fear_of_serious_physical_harm": ${ defendant_abuse_caused_fear_of_serious_physical_harm }
      - "defendant_abuse_caused_physical_harm": ${ defendant_abuse_caused_physical_harm }
      - "defendant_abuse_caused_sexual_assault": ${ defendant_abuse_caused_sexual_assault }
      - "order_defendant_stop_abuse_yes": ${ order_defendant_stop_abuse_yes }
      - "order_defendant_no_contact_unless_court_authorized_yes": ${ order_defendant_no_contact_unless_court_authorized_yes }
      - "order_defendant_remain_away_plaintiff_residence_yes": ${ order_defendant_remain_away_plaintiff_residence_yes }
      # - "If_this_is_an_apartment_building_or_other_multiple_family_dwelling_check_here": ${ If_this_is_an_apartment_building_or_other_multiple_family_dwelling_check_here }
      - "order_defendant_remain_away_plaintiff_workplace_yes": ${ order_defendant_remain_away_plaintiff_workplace_yes }
      - "order_defendant_remain_away_plaintiff_school_yes": ${ order_defendant_remain_away_plaintiff_school_yes }
      - "order_impound_plaintiff_address_residential_yes": ${ order_impound_plaintiff_address_residential_yes if not impound_personal_information else impound_personal_information }
      - "order_impound_plaintiff_address_work_yes": ${ order_impound_plaintiff_address_work_yes if not impound_personal_information else impound_personal_information }
      - "order_impound_plaintiff_address_school": ${ order_impound_plaintiff_address_school if not impound_personal_information else impound_personal_information }
      - "order_defendant_pay_yes": ${ order_defendant_pay_yes }
      - "order_defendant_pay_amount": ${ thousands(order_defendant_pay_amount) if  order_defendant_pay_amount else ''}
      - "losses_caused_by_defendant": ${ losses_caused_by_defendant if order_defendant_pay_yes else '' }
      - "order_defendant_pay_temporary_support_to_plaintiff_yes": ${ order_defendant_pay_temporary_support_to_plaintiff_yes }
      - "order_page_two_relief_yes": ${ order_page_two_relief_yes }
      - "order_other_relief_yes": ${ order_other_relief_yes }
      - "other_relief_description": ${ other_relief.replace("\r","").replace("\n","") if order_other_relief_yes else '' }
      - "order_relief_ex_parte": ${ order_relief_ex_parte }
      - plaintiff_and_defendant_other_case_description: ${plaintiff_and_defendant_other_case_description if not need_cases_addendum else cases_other_safe_for_pdf}

---
#mandatory: True
question: |
  Placeholder download screen
subquestion: |
  Placeholder
buttons:
  - Exit: exit
  - Restart: restart
attachment code: complaint_209A_labeled_page10003_attachment
---
need: complaint_209A_labeled_page10003
attachment:
    variable name: complaint_209A_labeled_page10003_attachment
    skip undefined: True
    name: 209A Complaint Page 1
    filename: A_Complaint_Page_1
    pdf template file: complaint_209A_labeled_1.pdf
    decimal places: 2    
    fields:   
      - "user_signature": ${ users[0].signature }
      - "user_name_full": ${ str(users[0]) }
      - "defendant": ${ str(other_parties[0]) }
      - "signature_date": ${ signature_date.format("M/d/yyyy") }
      - "municipal_court": ${ courts[0].department == "Boston Municipal Court" }
      - "district_court": ${ courts[0].department == "District Court" }
      - "probate_court": ${ courts[0].department == "Probate and Family Court" }
      - "superior_court": ${ courts[0].department == "Superior Court" }
      - "court_name_short": ${ courts[0].division }
      - "defendant_alias": ${ other_parties[0].name_other if defendant_has_alias else '' }
      - "defendant_weapons_description": ${ defendant_weapons_safe_for_pdf  }
      - "defendant_gender_male": ${ other_parties[0].gender_male }
      - "defendant_gender_female": ${ other_parties[0].gender_female }
      - "plaintiff_is_major_yes": ${ plaintiff_is_major_yes }
      - "plaintiff_is_major_no": ${ plaintiff_is_major_no }
      - "defendant_and_plaintiff_relationship_married_to_each_other": ${ relationship_to_defendant_married['now'] }
      - "defendant_and_plaintiff_relationship_formerly_married_to_each_other": ${ relationship_to_defendant_married['past'] }
      - "plaintiff_assistant_name": ${ plaintiff_assistant_name if plaintiff_is_major_no else '' }
      - "plaintiff_assistant_relationship_to_plaintiff": ${ plaintiff_assistant_relationship_to_plaintiff }
      - "defendant_and_plaintiff_relationship_not_married_but_are_related": ${ defendant_and_plaintiff_relationship_not_married_but_are_related }
      - "defendant_relationship_to_plaintiff_is": ${ defendant_relationship_to_plaintiff_is }
      - "defendant_is_major": ${ defendant_is_major }
      - "defendant_and_plaintiff_are_parents_of_child": ${ defendant_and_plaintiff_are_parents_of_child }
      - "defendant_and_plaintiff_are_not_related_but_live_together": ${ defendant_and_plaintiff_are_not_related_but_live_together }
      - "defendant_and_plaintiff_used_to_live_together": ${defendant_and_plaintiff_used_to_live_together }
      - "defendant_and_plaintiff_are_dating_or_dated": ${ defendant_and_plaintiff_are_dating_or_dated }
      - "plaintiff_has_minor_children_yes": ${ plaintiff_has_minor_children }
      - "plaintiff_has_minor_children_no": ${ not plaintiff_has_minor_children }
      - "plaintiff_and_defendant_other_case_yes": ${ plaintiff_and_defendant_other_case_yes }
      - "plaintiff_and_defendant_other_case_no": ${ not plaintiff_and_defendant_other_case_yes }      
      - "abuse_suffered_date": ${ incident_date }
      - "defendant_abuse_attempted_physical_harm": ${ defendant_abuse_attempted_physical_harm }
      - "defendant_abuse_caused_fear_of_serious_physical_harm": ${ defendant_abuse_caused_fear_of_serious_physical_harm }
      - "defendant_abuse_caused_physical_harm": ${ defendant_abuse_caused_physical_harm }
      - "defendant_abuse_caused_sexual_assault": ${ defendant_abuse_caused_sexual_assault }
      - "order_defendant_stop_abuse_yes": ${ order_defendant_stop_abuse_yes }
      - "order_defendant_no_contact_unless_court_authorized_yes": ${ order_defendant_no_contact_unless_court_authorized_yes }
      - "order_defendant_remain_away_plaintiff_residence_yes": ${ order_defendant_remain_away_plaintiff_residence_yes }
      # - "If_this_is_an_apartment_building_or_other_multiple_family_dwelling_check_here": ${ If_this_is_an_apartment_building_or_other_multiple_family_dwelling_check_here }
      - "order_defendant_remain_away_plaintiff_workplace_yes": ${ order_defendant_remain_away_plaintiff_workplace_yes }
      - "order_defendant_remain_away_plaintiff_school_yes": ${ order_defendant_remain_away_plaintiff_school_yes }
      - "order_impound_plaintiff_address_residential_yes": ${ order_impound_plaintiff_address_residential_yes if not impound_personal_information else impound_personal_information }
      - "order_impound_plaintiff_address_work_yes": ${ order_impound_plaintiff_address_work_yes if not impound_personal_information else impound_personal_information }
      - "order_impound_plaintiff_address_school": ${ order_impound_plaintiff_address_school if not impound_personal_information else impound_personal_information }
      - "order_defendant_pay_yes": ${ order_defendant_pay_yes }
      - "order_defendant_pay_amount": ${ thousands(order_defendant_pay_amount) if  order_defendant_pay_amount else ''}
      - "losses_caused_by_defendant": ${ losses_caused_by_defendant if order_defendant_pay_yes else '' }
      - "order_defendant_pay_temporary_support_to_plaintiff_yes": ${ order_defendant_pay_temporary_support_to_plaintiff_yes }
      - "order_page_two_relief_yes": ${ order_page_two_relief_yes }
      - "order_other_relief_yes": ${ order_other_relief_yes }
      - "other_relief_description": ${ other_relief.replace("\r","").replace("\n","") if order_other_relief_yes  else '' }
      - "order_relief_ex_parte": ${ order_relief_ex_parte }
      - plaintiff_and_defendant_other_case_description: ${plaintiff_and_defendant_other_case_description if not need_cases_addendum else cases_other_safe_for_pdf}
---
attachment:
  - variable name: page1_addendum
    docx template file: 209A_page1_addendum.docx
---
variable name: interview_metadata['complaint_209A_labeled_page10003']['built_in_fields_used']
data:
  - variable: user_name_full
  - variable: defendant
  - variable: signature_date
  - variable: user_signature
---
variable name: interview_metadata['complaint_209A_labeled_page10003']['field_list']
data:
  - variable: municipal_court
    field_type: yesno
  - variable: district_court
    field_type: yesno
  - variable: probate_court
    field_type: yesno
  - variable: superior_court
    field_type: yesno
  - variable: court_name_short
    field_type: text
    field_data_type: text
  - variable: defendant_alias
    field_type: text
    field_data_type: text
  - variable: defendant_gender_male
    field_type: yesno
  - variable: defendant_gender_female
    field_type: yesno
  - variable: plaintiff_is_major_yes
    field_type: yesno
  - variable: plaintiff_is_major_no
    field_type: yesno
  - variable: relationship_to_defendant_marriage_or_kids['defendant_and_plaintiff_relationship_married_to_each_other']
    field_type: yesno
  - variable: relationship_to_defendant_marriage_or_kids['defendant_and_plaintiff_relationship_formerly_married_to_each_other']
    field_type: yesno
  - variable: plaintiff_assistant_name
    field_type: text
    field_data_type: text
  - variable: relationship_to_defendant_unmarried['defendant_and_plaintiff_relationship_not_married_but_are_related']
    field_type: yesno
    field_data_type: text
  - variable: defendant_relationship_to_plaintiff_is
    field_type: text
    field_data_type: text
  - variable: defendant_is_major
    field_type: yesno
  - variable: relationship_to_defendant_marriage_or_kids['defendant_and_plaintiff_are_parents_of_child']
    field_type: yesno
  - variable: relationship_to_defendant_unmarried['defendant_and_plaintiff_are_not_related_but_live_together']
    field_type: yesno
  - variable: relationship_to_defendant_unmarried['defendant_and_plaintiff_used_to_live_together']
    field_type: yesno
  - variable: relationship_to_defendant_unmarried['defendant_and_plaintiff_are_dating_or_dated']
    field_type: yesno
  - variable: plaintiff_has_minor_children
    field_type: text
    field_data_type: text
  - variable: plaintiff_has_minor_children_yes
    field_type: text
    field_data_type: text
  - variable: plaintiff_and_defendant_other_case_yes
    field_type: yesno
  - variable: abuse_suffered_date
    field_type: text
    field_data_type: date
  - variable: defendant_abuse_attempted_physical_harm
    field_type: yesno
  - variable: defendant_abuse_caused_fear_of_serious_physical_harm
    field_type: yesno
  - variable: defendant_abuse_caused_physical_harm
    field_type: yesno
  - variable: defendant_abuse_caused_sexual_assault
    field_type: yesno
  - variable: order_defendant_stop_abuse_yes
    field_type: yesno
  - variable: order_defendant_no_contact_unless_court_authorized_yes
    field_type: yesno
  - variable: order_defendant_remain_away_plaintiff_residence_yes
    field_type: yesno
  - variable: If_this_is_an_apartment_building_or_other_multiple_family_dwelling_check_here
    field_type: yesno
  - variable: order_defendant_remain_away_plaintiff_workplace_yes
    field_type: yesno
  - variable: order_defendant_remain_away_plaintiff_school_yes
    field_type: yesno
  - variable: order_impound_plaintiff_address_residential_yes
    field_type: yesno
  - variable: order_impound_plaintiff_address_work_yes
    field_type: yesno
  - variable: order_impound_plaintiff_address_school
    field_type: yesno
  - variable: order_defendant_pay_yes
    field_type: yesno
  - variable: order_defendant_pay_amount
    field_type: text
    field_data_type: currency
  - variable: losses_caused_by_defendant
    field_type: area
    field_data_type: text
  - variable: order_defendant_pay_temporary_support_to_plaintiff_yes
    field_type: yesno
  - variable: order_page_two_relief_yes
    field_type: yesno
  - variable: order_other_relief_yes
    field_type: yesno
  - variable: other_relief
    field_type: text
    field_data_type: text
  - variable: order_relief_ex_parte
    field_type: yesno
  - variable: defendant_weapons_guns
    field_type: yesno
  - variable: defendant_weapons_ammunition
    field_type: yesno
  - variable: defendant_weapons_firearms_identification_card
    field_type: yesno
  - variable: defendant_weapons_license_to_carry
    field_type: yesno
  - variable: defendant_weapons_description
    field_type: text
    field_data_type: text