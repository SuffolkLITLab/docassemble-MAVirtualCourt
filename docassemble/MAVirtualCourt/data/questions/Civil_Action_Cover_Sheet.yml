mandatory: True
code: |
  interview_metadata # make sure we initialize the object
  if not defined("interview_metadata['Civil_Action_Cover_Sheet0026']"):
    interview_metadata.initializeObject('Civil_Action_Cover_Sheet0026')
  interview_metadata['Civil_Action_Cover_Sheet0026'].update({
    'title': 'Civil Action Cover Sheet - intial commit MM',
    'short title': 'Civil Action Cover Sheet',
    'description': 'Placeholder text',
    'original_form': 'https://www.mass.gov/files/documents/2016/08/tf/civil-action-cover-sheet-specific-counties.pdf',
    'allowed courts': [
      'Superior Court',
    ],
    'preferred court': 'Superior Court',
    'categories': [
      'Consumer and Debt',
      'Domestic Violence / Safety of self',
      'Education',
      'Employment / Unemployment',
      'Family Law',
      'Guardianship',
      'Health and Mental Health',
      'Housing',
      'Immigration',
      'Income and benefits',
      'Rights of incarcerated/formerly incarcerated',
    ],
    'logic block variable': 'Civil_Action_Cover_Sheet0026',
    'attachment block variable': 'Civil_Action_Cover_Sheet0026_attachment',
    'typical role': 'plaintiff',
    'built_in_fields_used': [
      {'variable': 'docket_number',
       'transformed_variable': 'docket_numbers[0]',
      },
      {'variable': 'plaintiff',
       'transformed_variable': 'str(plaintiffs[0])',
      },
      {'variable': 'court_county',
       'transformed_variable': 'courts[0].address.county',
      },
      {'variable': 'defendant',
       'transformed_variable': 'str(defendants[0])',
      },
      {'variable': 'attorney',
       'transformed_variable': 'str(attorneys[0])',
      },
      {'variable': 'user_signature',
       'transformed_variable': 'users[0].signature',
      },
      ],
    'fields': [
      {'variable': 'plaintiff_address',
       'transformed_variable': 'plaintiffs[0].address',
      'field_type': 'area',
      'field_data_type': 'text',
      },
      {'variable': 'attorney_address',
       'transformed_variable': 'attorneys[0].address',
      'field_type': 'area',
      'field_data_type': 'text',
      },
      {'variable': 'bbo_number',
       'transformed_variable': 'bbo_number',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'defendant_address',
       'transformed_variable': 'defendants[0].address',
      'field_type': 'area',
      'field_data_type': 'text',
      },
      {'variable': 'jury_claim_made_yes',
       'transformed_variable': 'jury_claim_made_yes',
      'field_type': 'yesno',
      },
      {'variable': 'jury_claim_made_no',
       'transformed_variable': 'jury_claim_made_no',
      'field_type': 'yesno',
      },
      {'variable': 'code_number',
       'transformed_variable': 'code_number',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'type_of_action',
       'transformed_variable': 'type_of_action',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'track',
       'transformed_variable': 'track',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'description_if_other',
       'transformed_variable': 'description_if_other',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'class_action_yes',
       'transformed_variable': 'class_action_yes',
      'field_type': 'yesno',
      },
      {'variable': 'claim_under_glc_93a_yes',
       'transformed_variable': 'claim_under_glc_93a_yes',
      'field_type': 'yesno',
      },
      {'variable': 'class_action_no',
       'transformed_variable': 'class_action_no',
      'field_type': 'yesno',
      },
      {'variable': 'claim_under_glc_93a_no',
       'transformed_variable': 'claim_under_glc_93a_no',
      'field_type': 'yesno',
      },
      {'variable': 'documented_medical_expenses_hospital',
       'transformed_variable': 'documented_medical_expenses_hospital',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_medical_expenses_doctor',
       'transformed_variable': 'documented_medical_expenses_doctor',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_medical_expenses_chiropractic',
       'transformed_variable': 'documented_medical_expenses_chiropractic',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_medical_expenses_physical_therapy',
       'transformed_variable': 'documented_medical_expenses_physical_therapy',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_medical_expenses_other',
       'transformed_variable': 'documented_medical_expenses_other',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_medical_expenses_total',
       'transformed_variable': 'documented_medical_expenses_total',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_lost_wages',
       'transformed_variable': 'documented_lost_wages',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_property_damages',
       'transformed_variable': 'documented_property_damages',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'anticipated_future_medical_expenses',
       'transformed_variable': 'anticipated_future_medical_expenses',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'anticipated_lost_wages',
       'transformed_variable': 'anticipated_lost_wages',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_damages',
       'transformed_variable': 'documented_damages',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'documented_items_of_damages_other',
       'transformed_variable': 'documented_items_of_damages_other',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'total_tort_claims',
       'transformed_variable': 'total_tort_claims',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'description_plaintiff_injury',
       'transformed_variable': 'description_plaintiff_injury',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'collection_of_debt_yes',
       'transformed_variable': 'collection_of_debt_yes',
      'field_type': 'yesno',
      },
      {'variable': 'total_contract_claims',
       'transformed_variable': 'total_contract_claims',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'description_of_claim',
       'transformed_variable': 'description_of_claim',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'user_signature_date',
       'transformed_variable': 'users[0].signature_date',
      'field_type': 'text',
      'field_data_type': 'date',
      },
      {'variable': 'related_actions',
       'transformed_variable': 'related_actions',
      'field_type': 'text',
      'field_data_type': 'text',
      },
      {'variable': 'certification_signature_date',
       'transformed_variable': 'certification_signature_date',
      'field_type': 'text',
      'field_data_type': 'date',
      },
      ],
  })
---
id: contract claims
question: |
  Does this action involve contract claims?
subquestion: |
  If this civil action involves contract claims, provide a description of those claims and the total dollar value of the claims. Otherwise, skip this question. 
fields:
  - 'Total contract claims': total_contract_claims
    datatype: currency
    required: False
    help: |
      Provide instructions on calculating contact claims.
  - 'Description of contract claims': description_of_claim
    required: False
    help: |
      Provide example description.
---
code: |
  if total_contract_claims == "":
    total_contract_claims = 0
  else:
    total_contract_claims = total_contract_claims
---
id: plaintiff injury
question: |
  Describe Plaintiff's injury
subquestion: |
  Include the nature and extent of injury.
fields:
  - "Description of plaintiff's injury": description_plaintiff_injury
    required: false
    help: |
      Provide example injury description.
---
id: other documented damages
continue button field: Does_Plaintiff_have_other_documented_damages
question: |
  Does Plaintiff have other documented damages?
subquestion: |
  If the Plaintiff incurred any other damages related to the actions covered in this claim, enter the total amount and describe the additional damages here. These damages may require documentation. 
fields:
  - 'Other documented damages': documented_damages
    datatype: currency
    required: False
  - 'Description of other documented damages': documented_items_of_damages_other
    required: False
    help: |
      Provide examples of types of additional damages that can be listed here.
---
id: claim involving collection of debt
question: |
  Does this action include a claim involving collection of a debt?
subquestion: |
  The debt must be incurred pursuant to a revolving credit agreement. Mass. R. Civ. P. 8.1(a).
fields:
  - no label: collection_of_debt
    datatype: radio
    choices: 
      - Yes: yes
      - No: no
---
code: |
  collection_of_debt_yes = collection_of_debt == "yes"
  collection_of_debt_no = collection_of_debt == "no"
---
id: jury claim
question: |
  Has a jury claim been made?
subquestion: |
  Have you, or someone on your behalf, made a jury claim for the amounts covered in this civil action? 
fields:
  - no label: jury_claim
    datatype: radio
    choices:
      - Yes: yes
      - No: no
---
code: |
  jury_claim_made_yes = jury_claim == "yes"
  jury_claim_made_no = jury_claim == "no"
---
question: |
  Hidden logic
subquestion: |
  Sub-total documented medical expenses to date
fields:
  - 'Total tort claims': total_tort_claims
---
code: |
  documented_medical_expenses_total = documented_medical_expenses_chiropractic + documented_medical_expenses_doctor + documented_medical_expenses_hospital + documented_medical_expenses_other + documented_medical_expenses_physical_therapy
  total_tort_claims = documented_medical_expenses_total + anticipated_future_medical_expenses + anticipated_lost_wages + documented_lost_wages + documented_property_damages + documented_damages
---
id: claim under G.L. c. 93A
question: |
  Is there a claim under G.L. c. 93A?
subquestion: |
  [Additional information on claims made under G.L. c. 93A](https://malegislature.gov/Laws/GeneralLaws/PartI/TitleXV/Chapter93A)
fields:
  - no label: claim_under_glc93a
    datatype: radio
    choices:
      - Yes: yes
      - No: no
---
code: |
  claim_under_glc_93a_yes = claim_under_glc93a == "yes"
  claim_under_glc_93a_no = claim_under_glc93a == "no"
---
id: class action
question: |
  Is this a class action under Mass. R. Civ. P. 23?
subquestion: |
  [Additional information on class actions under Mass. R. Civ. P. 23](https://www.mass.gov/rules-of-civil-procedure/civil-procedure-rule-23-class-actions)
fields:
  - no label: class_action
    datatype: radio
    choices:
      - Yes: yes
      - No: no
---
code: |
  class_action_yes = class_action == "yes"
  class_action_no = class_action == "no"
---
id: related actions
continue button field: Related_actions
question: |
  Are there any actions related to this civil action pending in the Superior Court? 
subquestion: |
  Provide the case number, case name, and county of any related actions. If there are none, skip this question. 
fields:
  - 'Description of related actions': related_actions
    required: False
---
id: signature dates
question: |
  Signature dates to do
subquestion: |
  Placeholder text
fields:
  - 'Date of user signature': users[0].signature_date
    datatype: date
  - 'Date of certification signature': certification_signature_date
    datatype: date
---
id: action and track designation
question: |
  Type of action and track designation
subquestion: |
  For instructions on how to fill out this section, refer to [Page 2 of the Civil Action Cover Sheet](https://www.mass.gov/files/documents/2016/08/tf/civil-action-cover-sheet-specific-counties.pdf).
fields:
  - 'Code number': code_number
    required: False
  - 'Type of action': type_of_action
    required: False
  - 'Track': track
    required: False
  - 'Description if other': description_if_other
    required: False
# comment: I think the first three fields should be required because the user will need to fill those in. If not too complex, we may be able to include some show if logic for description if other?
---
id: other damages
question: |
  Placeholder text: What are your other damages?
subquestion: |
  Placeholder text
fields:
  - 'Documented lost wages and compensation': documented_lost_wages
    datatype: currency
    required: False
    help: |
      Insert help text that explains lost wages and compensation.
  - 'Documented property damages': documented_property_damages
    datatype: currency
    required: False
    help: |
      Insert help text that describes property damages.
  - 'Anticipated future medical expenses': anticipated_future_medical_expenses
    datatype: currency
    required: False
    help: |
      Provide details on how to calculate this number.
  - 'Anticipated lost wages': anticipated_lost_wages
    datatype: currency
    required: False
    help: |
      Provide details on how to calculate this amount.
---
code: |
  if documented_lost_wages == "":
    documented_lost_wages = 0
  else:
    documented_lost_wages = documented_lost_wages
  if documented_property_damages == "":
    documented_property_damages = 0
  else:
    documented_property_damages = documented_property_damages
  if anticipated_future_medical_expenses == "":
    anticipated_future_medical_expenses = 0
  else:
    anticipated_future_medical_expenses = anticipated_future_medical_expenses
  if anticipated_lost_wages == "":
    anticipated_lost_wages = 0
  else:
    anticipated_lost_wages = anticipated_lost_wages
---
id: documented medical expenses
question: |
  What are your documented medical expenses to date?
subquestion: |
  Enter the total amount, in dollars, of documented medical expenses incurred in connection with this claim. 
fields:
  - 'Hospital expenses': documented_medical_expenses_hospital
    datatype: currency
    required: False
    help: |
      You can include all expenses incurred with a hospital visit, like emergency room charges, supplies, overnight stays, etc. Do not include expenses that were charged by your doctor or ambulance company, chiropractor, or physical therapist (they are covered separately).
  - 'Doctor expenses': documented_medical_expenses_doctor
    datatype: currency
    required: False
    help: |
      You can include all costs related to doctor visits. Do not include expenses that were charged by chiropractors, physical therapists, or other providers (they are covered separately).
  - 'Chiropractic expenses': documented_medical_expenses_chiropractic
    datatype: currency
    required: False
    help: |
      You can include all costs related to chiropractor visits. Do not include expenses that were charged by doctors, physical therapists, or other providers (they are covered separately).
  - 'Physical therapy expenses': documented_medical_expenses_physical_therapy
    datatype: currency
    required: False
    help: |
      You can include all expenses related to physical therapy. Do not include expenses that were charged by your hospital, ambulance company, chiropractor, or doctor (they are covered separately).
  - 'Other documented medical expenses': documented_medical_expenses_other
    datatype: currency
    required: False
    help: |
      Include all documented medical expenses incurred in connection with this claim that have not been provided in the hospital, doctor, chiropractor, or physical therapy sections.
---
code: |
  if documented_medical_expenses_hospital == "":
    documented_medical_expenses_hospital = 0
  else:
    documented_medical_expenses_hospital = documented_medical_expenses_hospital
  if documented_medical_expenses_doctor == "":
    documented_medical_expenses_doctor = 0
  else:
    documented_medical_expenses_doctor = documented_medical_expenses_doctor
  if documented_medical_expenses_chiropractic == "":
    documented_medical_expenses_chiropractic = 0
  else:
    documented_medical_expenses_chiropractic = documented_medical_expenses_chiropractic
  if documented_medical_expenses_physical_therapy == "":
    documented_medical_expenses_physical_therapy = 0
  else:
    documented_medical_expenses_physical_therapy = documented_medical_expenses_physical_therapy
  if documented_medical_expenses_other == "":
    documented_medical_expenses_other = 0
  else:
    documented_medical_expenses_other = documented_medical_expenses_other
---
question: |
 What are your details?
subquestion: |
  Enter your registered address and BBO.
fields:
  - 'Attorney address': attorneys[0].address
    input type: area
    required: False
  - 'BBO number': bbo_number
---
question: |
  What is the Defendant's address?
subquestion: |
  Placeholder text
fields:
  - 'Defendant address': defendants[0].address
    input type: area
---


question: |
  Sign below, ${attorneys}
under: |
  ${attorneys}
signature: certification_signature
---
question: |
  What is the Plaintiff's address?
subquestion: |
  Placeholder text
fields:
  - 'Plaintiff address': plaintiffs[0].address
    input type: area
---
id: download screen
progress: 100
mandatory: True
question: |
  Placeholder download screen
subquestion: |
  Placeholder
  
  ### Next steps
  
  1. Step 1
  1. Step 2
  
  Below is a preview of your form.
  
  ${Civil_Action_Cover_Sheet0026_attachment }
attachment code: Civil_Action_Cover_Sheet0026_attachment
---
need: Civil_Action_Cover_Sheet0026
attachment:
    variable name: Civil_Action_Cover_Sheet0026_attachment
    name: Civil Action Cover Sheet
    skip undefined: True
    filename: civil_action_cover_sheet
    pdf template file: Civil_Action_Cover_Sheet.pdf
    fields: 
      - "plaintiff": ${ str(plaintiffs[0]) }
      - "court_county": ${ courts[0].address.county }
      - "defendant": ${ str(defendants[0]) }
      - "attorney": ${ str(attorneys[0]) }
      - "user_signature": ${ users[0].signature }
      - "plaintiff_address": ${ plaintiffs[0].address }
      - "attorney_address": ${ attorneys[0].address }
      - "bbo_number": ${ bbo_number }
      - "defendant_address": ${ defendants[0].address }
      - "jury_claim_made_yes": ${ jury_claim_made_yes }
      - "jury_claim_made_no": ${ jury_claim_made_no }
      - "code_number": ${ code_number }
      - "type_of_action": ${ type_of_action }
      - "track": ${ track }
      - "description_if_other": ${ description_if_other }
      - "class_action_yes": ${ class_action_yes }
      - "claim_under_glc_93a_yes": ${ claim_under_glc_93a_yes }
      - "class_action_no": ${ class_action_no }
      - "claim_under_glc_93a_no": ${ claim_under_glc_93a_no }
      - "documented_medical_expenses_hospital": ${ f'{int(round(documented_medical_expenses_hospital)):,}' }
      - "documented_medical_expenses_doctor": ${ f'{int(round(documented_medical_expenses_doctor )):,}' }
      - "documented_medical_expenses_chiropractic": ${ f'{int(round(documented_medical_expenses_chiropractic )):,}' }
      - "documented_medical_expenses_physical_therapy": ${ f'{int(round(documented_medical_expenses_physical_therapy) ):,}' }
      - "documented_medical_expenses_other": ${ f'{int(round(documented_medical_expenses_other) ):,}' }
      - "documented_medical_expenses_total": ${ f'{int(round(documented_medical_expenses_total )):,}' }
      - "documented_lost_wages": ${ f'{int(documented_lost_wages):,}' }
      - "documented_property_damages": ${ f'{int(round(documented_property_damages)):,}' }
      - "anticipated_future_medical_expenses": ${ f'{int(round(anticipated_future_medical_expenses)):,}' }
      - "anticipated_lost_wages": ${ f'{int(round(anticipated_lost_wages)):,}' }
      - "documented_damages": ${ f'{int(round(documented_damages)):,}' }
      - "documented_items_of_damages_other": ${ f'{int(round(documented_items_of_damages_other)):,}' }
      - "total_tort_claims": ${ f'{int(round(total_tort_claims)):,}' }
      - "description_plaintiff_injury": ${ description_plaintiff_injury }
      - "collection_of_debt_yes": ${ collection_of_debt_yes }
      - "total_contract_claims": ${ f'{int(round(total_contract_claims)):,}' }
      - "description_of_claim": ${ description_of_claim }
      - "user_signature_date": ${ users[0].signature_date }
      - "related_actions": ${ related_actions }
      - "certification_signature_date": ${ certification_signature_date }
      - "certification_signature": ${ certification_signature }
---
include:
  - docassemble.MAVirtualCourt:basic-questions.yml
---
id: introduction page
continue button field: Civil_Action_Cover_Sheet0026_intro
question: |
  Civil Action Cover Sheet
subquestion: |
  A civil cover sheet must be filed with each complaint in Superior Court.
---
id: interview_order_Civil_Action_Cover_Sheet0026
code: |
  user_role = "plaintiff"
  basic_questions_intro_screen 
  Civil_Action_Cover_Sheet0026_intro
  # Set the preferred/allowed courts for this interview
  preferred_court = interview_metadata["Civil_Action_Cover_Sheet0026"]["preferred court"]
  allowed_courts = interview_metadata["Civil_Action_Cover_Sheet0026"]["allowed courts"]
  plaintiffs[0].address
  attorneys[0].address
  defendants[0].address
  jury_claim_made_yes
  code_number
  claim_under_glc_93a_yes
  class_action_yes
  documented_medical_expenses_hospital
  anticipated_future_medical_expenses
  Does_Plaintiff_have_other_documented_damages
  description_plaintiff_injury
  collection_of_debt_yes
  total_contract_claims
  Related_actions
  documented_medical_expenses_total
  users[0].signature_date
  str(plaintiffs[0])
  courts[0].address.county
  str(defendants[0])
  str(attorneys[0])
  # By default, we'll mark any un-filled fields as DAEmpty(). This helps avoid errors if you intentionally hide a logic branch or mark a question not required
  # Comment out the line below if you don't want this behavior. 
  # mark_unfilled_fields_empty(interview_metadata["Civil_Action_Cover_Sheet0026"])
  Civil_Action_Cover_Sheet0026_preview_question # Pre-canned preview screen
  signature_fields = ['certification_signature', 'users[0].signature']
  basic_questions_signature_flow
  users[0].signature
  Civil_Action_Cover_Sheet0026 = True
---
id: preview screen
continue button field: Civil_Action_Cover_Sheet0026_preview_question
question: |
  Placeholder preview screen
subquestion: |
  Here is a preview of the form you'll sign on the next page. 
  
   ${Civil_Action_Cover_Sheet0026_attachment_preview}
---
attachment:
    variable name: Civil_Action_Cover_Sheet0026_attachment_preview
    name: Civil Action Cover Sheet
    skip undefined: True
    filename: Civil_Action_Cover_Sheet
    pdf template file: Civil_Action_Cover_Sheet.pdf
    fields: 
      - "plaintiff": ${ str(plaintiffs[0]) }
      - "court_county": ${ courts[0].address.county }
      - "defendant": ${ str(defendants[0]) }
      - "attorney": ${ str(attorneys[0]) }
      - "plaintiff_address": ${ plaintiffs[0].address }
      - "attorney_address": ${ attorneys[0].address }
      - "bbo_number": ${ bbo_number }
      - "defendant_address": ${ defendants[0].address }
      - "jury_claim_made_yes": ${ jury_claim_made_yes }
      - "jury_claim_made_no": ${ jury_claim_made_no }
      - "code_number": ${ code_number }
      - "type_of_action": ${ type_of_action }
      - "track": ${ track }
      - "description_if_other": ${ description_if_other }
      - "class_action_yes": ${ class_action_yes }
      - "claim_under_glc_93a_yes": ${ claim_under_glc_93a_yes }
      - "class_action_no": ${ class_action_no }
      - "claim_under_glc_93a_no": ${ claim_under_glc_93a_no }
      - "documented_medical_expenses_hospital": ${ f'{int(round(documented_medical_expenses_hospital)):,}' }
      - "documented_medical_expenses_doctor": ${ f'{int(round(documented_medical_expenses_doctor )):,}' }
      - "documented_medical_expenses_chiropractic": ${ f'{int(round(documented_medical_expenses_chiropractic )):,}' }
      - "documented_medical_expenses_physical_therapy": ${ f'{int(round(documented_medical_expenses_physical_therapy) ):,}' }
      - "documented_medical_expenses_other": ${ f'{int(round(documented_medical_expenses_other) ):,}' }
      - "documented_medical_expenses_total": ${ f'{int(round(documented_medical_expenses_total )):,}' }
      - "documented_lost_wages": ${ f'{int(documented_lost_wages):,}' }
      - "documented_property_damages": ${ f'{int(round(documented_property_damages)):,}' }
      - "anticipated_future_medical_expenses": ${ f'{int(round(anticipated_future_medical_expenses)):,}' }
      - "anticipated_lost_wages": ${ f'{int(round(anticipated_lost_wages)):,}' }
      - "documented_damages": ${ f'{int(round(documented_damages)):,}' }
      - "documented_items_of_damages_other": ${ f'{int(round(documented_items_of_damages_other)):,}' }
      - "total_tort_claims": ${ f'{int(round(total_tort_claims)):,}' }
      - "description_plaintiff_injury": ${ description_plaintiff_injury }
      - "collection_of_debt_yes": ${ collection_of_debt_yes }
      - "total_contract_claims": ${ f'{int(round(total_contract_claims)):,}' }
      - "description_of_claim": ${ description_of_claim }
      - "user_signature_date": ${ users[0].signature_date }
      - "related_actions": ${ related_actions }
      - "certification_signature_date": ${ certification_signature_date }